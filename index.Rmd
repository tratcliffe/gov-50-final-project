---
title: "Gov 50 Final Project"
author: "Talulah Ratcliffe"
description: "My final project"
output:
  distill::distill_article:
    self_contained: false
---

## Project Proposal 
Is the inclusion of 'Diversity, Equity and Inclusion' within K-12 School District mission statements affected by party, race and income? In this study, I plan to examine the extent to which socioeconomic and partisan factors of a given school district in the US, influences whether or not values of diversity, equity and inclusion are included in their mission statements. 

I hypothesize that there will not only be a correlation between party and race/income, but that Republican districts with higher proportions of white, upper-class students, will be less likely to include Diversity, Equity and Inclusion within their mission statements. 

As seen through the Affirmative Action case this year, conservative ideology tends to value race-blind and, more generally, identity-blind policies and values. Policies (with a school Mission statement replicating the effect of a legal imposition) which attempt to fundamentally interfere with objective principles which equally apply to all, are usually rejected by Republicans, as well as privileged racial and economic groups. 

My representative sample is comprised of 1314 mission statements from regular public school districts, whose mission statements were published online as of November 2022. The schools were chosen from a comprehensive list maintained by the National Center for Education Statistics. My unit of analysis is a Mission Statement. The explanatory variable of interest is whether values of diversity, equity or inclusion are included. The variable is coded = 1 for included, and = 0 for excluded. There are several key words that will indicate these values (closing gap, culture, diversity, equity, inclusion, nationality, race). My outcome variables are the party of the district - Republican or Democrat. This is reflected through whether the majority of residents voted for Donald Trump or Joe Biden in the 2020 presidential election, and is calculated using 2020 General Election Results Disaggregated to 2020 Census Blocks Datasets available through the Redistricting Data Hub. Population data includes median income and share of white residents, and was accessed from the 2015-2019 American Community Survey estimates published by the Census Bureau. 

If I observe less inclusion of diversity, inclusion and equity values in Mission Statements within Republican, upper-class and predominately white districts, this would provide support for my hypothesis. On the other hand, if I observe less inclusion of diversity, inclusion and equity values in Mission Statements within Democratic, lower-class and predominately non-white school districts, this would provide evidence against my hypothesis. 

```{r, echo=FALSE}
library(tidyverse)
diversity_data <- read.csv("data/district_tabular_data.csv")
```


```{r, echo=FALSE}
diversity_data <- diversity_data |>
  select(topic_diversity_equity_and_inclusion, majority_vote, white_share_category, hh_median_income_category)
```

```{r, echo=FALSE}
div_count <- diversity_data |>
  group_by(majority_vote) |>
  filter(!is.na(majority_vote), topic_diversity_equity_and_inclusion == 1) |>
  count()

ggplot(div_count, aes(x = majority_vote, y = n)) +
  geom_bar(stat = "identity", fill = c("democratic" = "blue", "republican" = "red")) +
  labs(
    title = "Diversity, Equity and Inclusion Topic by Party",
    x = "Party Affiliation",
    y = "Number of Mentions"
  ) +
  scale_x_discrete(labels = c("democratic" = "Democratic", "republican" = "Republican")) +
  theme_minimal() 
```

This graph shows a comparison of democratic and republican inclusions of diversity, equity or inclusion topics within their mission statements. It is the beginning of an exploration between party affiliation and an educational focus on these topics, and suggests that being democratic increases a school district's tendency to include them. 

```{r, echo=FALSE}
income_table <- diversity_data |>
  mutate(Income = case_when(
  hh_median_income_category %in% c("low_median_income") ~ "Low Median Income",
  hh_median_income_category %in% c("medium_median_income") ~ "Medium Median Income",
  hh_median_income_category %in% c("high_median_income") ~ "High Median Income"),
    Party = case_when(
      majority_vote == "republican" ~ "Republican",
      majority_vote == "democratic" ~ "Democratic",
      NA ~ "Other"
    )) |>
  group_by(Party, Income) |>
  summarize(n = n()) |>
  mutate(prop = n / sum(n)) |>
  select(-n) |>
  pivot_wider(
    names_from = Party,
    values_from = prop
  ) |>
select(Income, Democratic, Republican)
knitr::kable(income_table)
```
```{r, echo=FALSE}
party_income <- income_table |>
  pivot_longer(cols = c("Democratic", "Republican"), names_to = "Party", values_to = "Proportion")

ggplot(race_party_income, aes(x = Income, y = Proportion, fill = Party)) +
  geom_bar(stat = "identity", position = "dodge") +
  labs(
    title = "Proportion of Democratic and Republican Voters by Income",
    x = "Income Group",
    y = "Proportion"
  ) +
  scale_fill_manual(values = c("Democratic" = "blue", "Republican" = "red")) +
  theme_minimal()
```


This cross-tab proportion table, and accompanying graph, examines how income levels differ by party, in an attempt to see if there is a connection between the two. It does so by showing the proportion of each party within each income group. Both table and graph show that both the high and low median income individuals have a relatively balanced distribution between Democrats and Republicans. However, the proportion of democrats is higher than republicans in both income categories, with the difference being slightly higher in the high income group. However, the medium median income group shows the largest disparity, with most being Republican. Knowing this, I plan to examine if both income and party influence whether or not diversity is talked about in their statements. 

The implied connection between income group and party, wherein districts with higher median incomes are predominately democratic, districts with lower median incomes are predominately democratic, and districts with medium median incomes are predominately republican, is not entirely aligned with my hypothesis. I hypothesized that a higher median income would be associated with Republican districts, but that is more true for medium income / middle-class districts. However, my assumed grouping of low median income groups with democratic areas is plausible based on this analysis. 


```{r, echo=FALSE}
diversity_data |>
  drop_na(majority_vote, white_share_category) |>
  count(majority_vote, white_share_category) |>
ggplot(mapping = aes(x = white_share_category, y = n, fill = majority_vote)) +
  geom_bar(stat = "identity", position = "dodge") +
  labs(title = "Correlation between Party and Race",
       x = "Predominant Race of District Residents",
       y = "Frequency",
       fill = "Party Affiliation") +
  scale_fill_manual(values = c("democratic" = "blue", "republican" = "red"),
                    name = "Party Affiliation",
                    labels = c("democratic" = "Democratic", "republican" = "Republican")) +
  scale_x_discrete(labels = c("low_share" = "Predominately Non-White Population", "high_share" = "Predominately White Population")) +
  theme_minimal()
```
This graph investigates if there is a connection between party affiliation and race within a given school district. There is a significant difference in the number of democratic and republican areas when the population is predominately non-white: there are more democratic areas that are predominately non-white, than there are republican areas. In comparison, there are far more republican areas when the population is predominately white, and the difference is even more pronounced. Notably, there are less overall values in the predominately white population category, which could suggest an imbalance in the data. 

The implied connection between race and party, wherein districts with a higher proportion of white residents tend to be republican, and districts with a lower proportion of white residents tend to be democratic, aligns with my hypothesis which grouped these two variables together.  


```{r, echo=FALSE}
combined_table <- diversity_data %>%
  mutate(
    Income = case_when(
      hh_median_income_category %in% c("low_median_income") ~ "Low Median Income",
      hh_median_income_category %in% c("medium_median_income") ~ "Medium Median Income",
      hh_median_income_category %in% c("high_median_income") ~ "High Median Income"
    ),
    Party = case_when(
      majority_vote == "republican" ~ "Republican",
      majority_vote == "democratic" ~ "Democratic",
      NA ~ "Other"
    )
  ) %>%
  group_by(white_share_category, Party, Income) %>%
  summarize(prop = n() / nrow(.))

filtered_data <- combined_table %>%
  filter(Party %in% c("Democratic", "Republican"))

ggplot(filtered_data, aes(x = Income, y = prop, fill = Party)) +
  geom_bar(stat = "identity", position = "dodge", color = "black", width = 0.7) +
  labs(
    title = "Proportions of Democratic and Republican Voters by Income and Race",
    x = "Income Category",
    y = "Proportion"
  ) +
  scale_fill_manual(values = c("Democratic" = "blue", "Republican" = "red")) +
  facet_grid(white_share_category ~ ., scales = "free_y", space = "free_y", switch = "y", labeller = labeller(white_share_category = c("low_share" = "Predominately Non-White Population", "high_share" = "Predominately White Population"))) +
  theme_minimal() +
  theme(strip.text = element_text(size = 8))
```
 
 
 when you are rich but black, mostly democratic. when rich but white, mostly republican. when you are poor but black, mostly democratic. when you are poor but white, mostly republican. when you are medium income but black, mostly democratic. when medium income but white, mostly republican. 
